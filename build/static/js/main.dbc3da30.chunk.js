(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{123:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),s=n.n(c),i=n(62),r=n.n(i),o=(n(72),n(33)),l=n(2),j=n(18),u=n(8),d=n.n(u),h=n(63),_=n.n(h),b=n(64),m=n.n(b),p=n(25),x=m.a.create({baseURL:"https://".concat(p.a,"/api/v1/")}),O=_()(p.a,{transfer:["websocket"]}),f=function(){var e=Object(c.useRef)(),t=Object(c.useState)(""),n=Object(j.a)(t,2),s=n[0],i=n[1],r=localStorage.getItem("id"),o=Object(c.useState)([]),l=Object(j.a)(o,2),u=l[0],h=l[1],_=function(){""!==s?(O.emit("send_msg",{id:r,msg:s}),O.on("send_msg",(function(e){h(e)})),i(""),e.current.scrollIntoView({behavior:"smooth"})):alert("Write something")};return Object(c.useEffect)((function(){return x.get("/msg").then((function(e){var t=e.data;h(t)})).catch((function(e){console.log(e)})),O.on("connection",(function(e){console.log(e),O.join("tst")})),function(){return O.disconnect()}}),[]),Object(c.useEffect)((function(){e.current.scrollIntoView({behavior:"smooth"})}),[u]),Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:d.a.container,children:[Object(a.jsx)("div",{className:d.a.chat_container,children:Object(a.jsxs)("div",{className:d.a.msg,children:[u.map((function(e,t){return e.senderId===r?Object(a.jsx)("p",{className:d.a.recipient_text,children:e.msg},t):Object(a.jsx)("p",{className:d.a.sender_text,children:e.msg},t)})),Object(a.jsx)("div",{ref:e})]})}),Object(a.jsxs)("div",{className:d.a.send_container,children:[Object(a.jsx)("div",{className:d.a.text_container,children:Object(a.jsx)("input",{type:"text",className:d.a.input,value:s,onKeyDown:function(e){"Enter"===e.key&&_()},onChange:function(e){var t=e.target;i(t.value)}})}),Object(a.jsx)("div",{className:d.a.btn_container,children:Object(a.jsx)("button",{className:d.a.btn,onClick:_,children:"send"})})]})]})})},g=n(19),v=n(34),N=n.n(v),C=function(){var e=Object(l.f)(),t=Object(c.useState)({email:"",password:""}),n=Object(j.a)(t,2),s=n[0],i=n[1],r=function(e){var t=e.target;"email"===t.name?i(Object(g.a)(Object(g.a)({},s),{},{email:t.value})):"pass"===t.name&&i(Object(g.a)(Object(g.a)({},s),{},{password:t.value}))};return Object(a.jsx)("div",{className:N.a.container,children:Object(a.jsxs)("form",{className:N.a.form,onSubmit:function(t){t.preventDefault(),""!==s.email&&""!==s.password?x.post("/register",s).then((function(t){localStorage.setItem("id",t.data.user._id),200===t.status&&e.push("/chat")})).catch((function(e){var t;400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&alert(e.response.data.msg)})):alert("Error. Write something")},children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email "}),Object(a.jsx)("input",{name:"email",type:"email",onChange:r}),Object(a.jsx)("label",{htmlFor:"pass",children:"Password "}),Object(a.jsx)("input",{name:"pass",type:"password",onChange:r}),Object(a.jsx)("input",{type:"submit",value:"Register"})]})})},w=n(66),y=n.n(w),E=function(){return Object(a.jsx)("div",{children:Object(a.jsx)("h1",{className:y.a.title,children:"Mongo Chat"})})},S=function(){return Object(a.jsxs)(o.a,{children:[Object(a.jsx)(E,{}),Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{path:"/chat",component:f}),Object(a.jsx)(l.a,{exact:!0,path:"/",component:C})]})]})};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(S,{})}),document.getElementById("root"))},25:function(e){e.exports=JSON.parse('{"a":"express-mongo-chat.herokuapp.com"}')},34:function(e,t,n){e.exports={container:"Register_container__2D3x4",form:"Register_form__3UxpI"}},66:function(e,t,n){e.exports={title:"Header_title__1wYnT"}},72:function(e,t,n){},8:function(e,t,n){e.exports={container:"Chat_container__353lq",chat_container:"Chat_chat_container__1dAZN",msg:"Chat_msg__1DKpZ",sender_text:"Chat_sender_text__2uGwd",recipient_text:"Chat_recipient_text__3BhE0",input:"Chat_input__1AH8f",btn_container:"Chat_btn_container__3BiXN",btn:"Chat_btn__2hno9",text_container:"Chat_text_container__3EPZM",send_container:"Chat_send_container__3tzdj"}}},[[123,1,2]]]);
//# sourceMappingURL=main.dbc3da30.chunk.js.map
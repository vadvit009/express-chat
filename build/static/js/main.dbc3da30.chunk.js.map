{"version":3,"sources":["axios/_axios.js","component/Chat/Chat.js","component/Register/Register.js","misc/Header/Header.js","App.js","index.js","component/Register/Register.module.css","misc/Header/Header.module.css","component/Chat/Chat.module.css"],"names":["_axios","axios","create","baseURL","url","socket","socketIOClient","transfer","Chat","bottomRef","useRef","useState","msg","setMsg","id","localStorage","getItem","chat","setChat","handleSubmit","emit","on","socketData","current","scrollIntoView","behavior","alert","useEffect","get","then","data","catch","e","console","log","join","disconnect","className","s","container","chat_container","map","text","i","senderId","recipient_text","sender_text","ref","send_container","text_container","type","input","value","onKeyDown","key","onChange","target","btn_container","btn","onClick","Register","h","useHistory","email","password","form","setForm","name","onSubmit","preventDefault","post","setItem","user","_id","status","push","response","htmlFor","Header","title","App","path","component","exact","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.dbc3da30.chunk.js","sourcesContent":["import axios from 'axios';\nimport {url} from '../config/uri.json';\n\nconst _axios = axios.create({\n  baseURL: `https://${url}/api/v1/`\n});\n\nexport default _axios;\n\n","import s from './Chat.module.css';\nimport {useState, useEffect, useRef} from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport _axios from \"../../axios/_axios\";\nimport {url} from '../../config/uri.json';\n\nconst socket = socketIOClient(url, {transfer: ['websocket']});\n\nconst Chat = () => {\n  const bottomRef = useRef();\n\n  const [msg, setMsg] = useState('');\n  const id = localStorage.getItem('id');\n  const [chat, setChat] = useState([])\n\n  const handleSubmit = () => {\n    if (msg !== '') {\n      socket.emit('send_msg', {id, msg})\n      socket.on('send_msg', (socketData) => {\n        setChat(socketData)\n      })\n      setMsg('');\n      bottomRef.current.scrollIntoView({behavior: \"smooth\"})\n    } else alert('Write something')\n  }\n\n  const handleChange = ({target}) => {\n    setMsg(target.value)\n  };\n\n  const handleEnterPress = (e) => {\n    if (e.key === 'Enter') {\n      handleSubmit()\n    }\n  };\n\n  useEffect(() => {\n    _axios.get('/msg')\n      .then(({data}) => {\n        setChat(data)\n      }).catch(e => {\n      console.log(e)\n    })\n\n    socket.on(\"connection\", (data) => {\n      console.log(data);\n      socket.join('tst')\n    });\n    return () => socket.disconnect();\n  }, []);\n\n  useEffect(() => {\n    bottomRef.current.scrollIntoView({behavior: \"smooth\"})\n  }, [chat]);\n\n  return (\n    <div>\n      <div className={s.container}>\n        <div className={s.chat_container}>\n          <div className={s.msg}>\n            {chat.map((text, i) =>\n              text.senderId === id\n                ? <p key={i} className={s.recipient_text}>{text.msg}</p>\n                : <p key={i} className={s.sender_text}>{text.msg}</p>\n            )}\n            <div ref={bottomRef}></div>\n          </div>\n        </div>\n        <div className={s.send_container}>\n          <div className={s.text_container}>\n            <input type={'text'} className={s.input} value={msg} onKeyDown={handleEnterPress} onChange={handleChange}/>\n          </div>\n          <div className={s.btn_container}>\n            <button className={s.btn} onClick={handleSubmit}>send</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Chat;\n","import React, {useState} from 'react';\nimport s from './Register.module.css';\nimport {useHistory} from 'react-router-dom';\nimport _axios from \"../../axios/_axios\";\n\nconst Register = () => {\n  const h = useHistory();\n  const [form, setForm] = useState({email: '', password: ''});\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (form.email !== '' && form.password !== '') {\n      _axios.post('/register', form)\n        .then(data => {\n          localStorage.setItem('id', data.data.user._id)\n          data.status === 200 && h.push('/chat')\n        }).catch(e => {\n        e?.response?.status === 400 && alert(e.response.data.msg)\n      })\n    } else alert('Error. Write something')\n  }\n\n  const onChange = ({target}) => {\n    if (target.name === 'email') {\n      setForm({...form, email: target.value})\n    } else if (target.name === 'pass') {\n      setForm({...form, password: target.value})\n    }\n  }\n\n  return (\n    <div className={s.container}>\n      <form className={s.form} onSubmit={handleSubmit}>\n        <label htmlFor={'email'}>Email </label>\n        <input name={'email'} type={'email'} onChange={onChange}/>\n        <label htmlFor={'pass'}>Password </label>\n        <input name={'pass'} type={'password'} onChange={onChange}/>\n        <input type={'submit'} value={\"Register\"}/>\n      </form>\n    </div>\n  )\n}\n\nexport default Register;","import React from 'react';\nimport s from './Header.module.css';\n\nconst Header = () => {\n  return (\n    <div>\n      <h1 className={s.title}>Mongo Chat</h1>\n    </div>\n  );\n}\n\nexport default Header;","import React from 'react';\nimport {BrowserRouter, Switch, Route} from \"react-router-dom\";\nimport Chat from \"./component/Chat/Chat\";\nimport Register from \"./component/Register/Register\";\nimport Header from \"./misc/Header/Header\";\n\nconst App = () => {\n  return (\n    <BrowserRouter>\n      <Header/>\n      <Switch>\n        <Route path={'/chat'} component={Chat}/>\n        <Route exact path={'/'} component={Register}/>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Register_container__2D3x4\",\"form\":\"Register_form__3UxpI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Header_title__1wYnT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Chat_container__353lq\",\"chat_container\":\"Chat_chat_container__1dAZN\",\"msg\":\"Chat_msg__1DKpZ\",\"sender_text\":\"Chat_sender_text__2uGwd\",\"recipient_text\":\"Chat_recipient_text__3BhE0\",\"input\":\"Chat_input__1AH8f\",\"btn_container\":\"Chat_btn_container__3BiXN\",\"btn\":\"Chat_btn__2hno9\",\"text_container\":\"Chat_text_container__3EPZM\",\"send_container\":\"Chat_send_container__3tzdj\"};"],"sourceRoot":""}